(function(){"use strict";var t=this,e=function(){this.scripts=[],this.nodes=[],this.testsCreated=0,this.testsPending=0,this.testsFailed=0};e.prototype.test=function(t,e,s){this.scripts.push({testSource:t,testName:e,testScript:s})},e.prototype.runTests=function(t){for(var e=0;e<this.scripts.length;e++){var s=this.scripts[e];t({log:"loading test script: "+s.testName}),s.testScript(t)}t({done:!0,testsCreated:this.testsCreated,testsPending:this.testsPending,testsFailed:this.testsFailed})},e.Node=function(t){if(t=t||{},this.type=t.type||null,!this.type||"h"!=this.type&&"p"!=this.type&&"e"!=this.type)throw new Error("Spec.Node type must be h, p or e")},e.Test=function(t,e,s){var r,n,o=this;t.testsCreated++,t.testsPending++,o.results=e,o.callback=s,o.testThrown=!1;try{var i=o.callback(o,function(){console.log("this be stubbed")});"undefined"!=typeof e&&(r=e instanceof Error?e.toString():e,n=i instanceof Error?i.toString():i,r!==n&&t.testsFailed++)}catch(p){o.testThrown=!0,"undefined"!=typeof e&&e instanceof Error&&p.toString()===e.toString()||t.testsFailed++}t.testsPending--},e.prototype.heading=function(t,s){if("string"!=typeof t||""===t)throw new Error("Spec.heading requires text argument");var r=new e.Node({type:"h"});return r.text=t,this.nodes.push(r),s&&s(),r},e.prototype.paragraph=function(t){if("string"!=typeof t||""===t)throw new Error("Spec.paragraph requires text argument");var s=new e.Node({type:"p"});return s.text=t,this.nodes.push(s),s},e.prototype.example=function(t,s,r){if("string"!=typeof t||""===t)throw new Error("Spec.example requires text argument");if("function"!=typeof r)throw new Error("Spec.example 3rd arg is function code or undefined");var n=new e.Node({type:"e"});return n.text=t,n.test=new e.Test(this,s,r),this.nodes.push(n),n},e.prototype.show=function(){},e.prototype.asyncResponse=function(){},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.Spec=e):t.Spec=e}).call(this);